# ðŸ“˜ CraftTrust Rebuild Playbook (Validated Version)

## ðŸ§­ Objective

This document guides the verified, exact, and **immutable** reconstruction of the CraftTrust backend and frontend environments from archival source files. It ensures total alignment with original structure, file count, and no regeneration, mutation, or scaffolding of any kind.

---

## ðŸ” Zero-Mutation Principles

* **No code or route generation** unless verified missing.
* **No additional dependencies** beyond those explicitly defined in package files.
* **No new folders, mock data, or filler content**.
* **All file/folder names must match original case and pathing**.

---

## ðŸ“¦ Archive Summary

| Archive Name                     | Files | Description                     |
| -------------------------------- | ----- | ------------------------------- |
| `crafttrust-source-backend.tgz`  | 462   | Backend codebase + config files |
| `crafttrust-source-frontend.tgz` | 1592  | Frontend application (Next.js)  |
| **TOTAL**                        | 2054  | Verified via `.sh` scripts      |

âœ… Extraction verified using `count-archives.sh`, `count-extracted.sh`, and `find-missing-files.sh`

---

## ðŸ“ Directory Layout (Confirmed Extracted)

```
/workspace
â”œâ”€â”€ src/                # Main application code (Node.js/GraphQL)
â”œâ”€â”€ libs/               # Internal libraries (customerio, redis, etc.)
â”œâ”€â”€ public/             # Static assets
â”œâ”€â”€ pages/              # Next.js routes
â”œâ”€â”€ database/           # DB seed/init
â”œâ”€â”€ .husky/             # Git hooks
â”œâ”€â”€ .vscode/            # Editor config
â”œâ”€â”€ .dockerignore
â”œâ”€â”€ cloudbuild.yaml
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile*
â”œâ”€â”€ .env.*              # (May exist post-rebuild)
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ yarn.lock
```

---

## ðŸ› ï¸ Rebuild Steps (Backend + Frontend)

### 1. â¬‡ï¸ Install Dependencies

Ensure **NO **`**, **`**, or **\`\`** commands** are used.

```bash
cd ~/workspace
yarn install  # or npm ci if specified
```

### 2. ðŸ§ª Validate Environment

```bash
node -v     # match Node version to project requirements
yarn -v     # confirm Yarn available if used
```

Check for `.env` and other required secrets/config:

```bash
ls -la .env*
```

> If missing: STOP and request `.env` files from original source

### 3. ðŸ³ Docker Check (Optional)

```bash
docker-compose config
```

Ensure services align with restored source structure (no default containers added).

---

## ðŸ§© GraphQL API (see separate API Map doc)

* Backend likely powered by Apollo Server / type-graphql
* Check `src/graphql/`, `src/entities/`, `src/resolvers/`
* Use introspection only if server boots cleanly from restored state

---

## ðŸ“ˆ Integrity Verification Tools

The following scripts were used and can be restored if needed:

* `count-archives.sh` â€” Verifies file counts in `.tgz` archives
* `count-extracted-complete.sh` â€” Counts total real extracted files
* `find-missing-files.sh` â€” Diffs archive vs disk (normalized)

> ðŸ§¼ All temp scripts removed post-verification for cleanliness

---

## ðŸ”š Status

âœ… **Rebuild baseline complete**
ðŸŸ¡ Next Step: Execute backend dev server or Docker environment, and begin testing known endpoints/routes

---

## ðŸ§  Appendix

**Helpful paths to monitor:**

* `src/components/` (UI logic)
* `libs/` (integrations)
* `pages/` (routing)
* `.docker*`, `cloudbuild.yaml` (CI/CD configs)

**Backup Timestamp**: Confirmed from archives' UNIX time (1970 fallback observed)

**Known Conflicts**: None remaining as of last diff count
